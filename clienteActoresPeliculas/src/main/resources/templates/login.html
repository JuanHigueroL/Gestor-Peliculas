<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login | Cineando</title>
  <link rel="stylesheet" th:href="@{/css/estilos.css}">
</head>
<body>

<div onclick="toggleDarkMode()" class="btn-tema-flotante"
     style="position: absolute; top: 20px; right: 20px; display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 10px; background: var(--bg-tarjeta); border-radius: 30px; box-shadow: 0 2px 5px var(--sombra); user-select: none; border: 1px solid var(--borde-color);">

  <svg id="icono-luna" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
       style="display: block;"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
  </svg>

  <svg id="icono-sol" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
       style="display: none;"> <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
  </svg>

  <span id="textoModo" style="font-size: 0.9rem; font-weight: 600;">Modo Oscuro</span>
</div>

<div class="form-container">

  <div class="form-card">

    <h2>Iniciar Sesión</h2>

    <div th:if="${userFailed != null}" class="alerta alerta-actualizado">
      <span th:text="${userFailed}"></span>
      <span class="cerrar-alerta" onclick="this.parentElement.style.display='none';">&times;</span>
    </div>

    <div th:if="${param.error}" class="alerta alerta-error">
      Usuario o contraseña incorrectos.
    </div>

    <div th:if="${param.logout}" class="alerta alerta-actualizado">
      Has cerrado sesión correctamente.
    </div>

    <form th:action="@{/login}" method="post">

      <div class="form-group">
        <label for="username">Usuario</label>
        <input type="text" id="username" name="username" placeholder="Introduce tu usuario" autofocus required/>
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" name="password" placeholder="Introduce tu contraseña" required/>
      </div>

      <button type="submit" class="btn btn-editar" style="width: 100%; margin-top: 10px; font-size: 1.1em;">
        Entrar
      </button>
    </form>

    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--borde-color);">
      <p style="margin-bottom: 10px; color: var(--color-texto-sec);">¿No tienes cuenta?</p>
      <a th:href="@{/registro}" class="btn"
         style="background-color: transparent; border: 1px solid var(--borde-color); color: var(--color-texto); width: 100%; box-sizing: border-box;">
        Crear nuevo usuario
      </a>
    </div>
  </div>

  <div class="btn-volver-container" style="margin-top: 20px;">
    <a th:href="@{/peliculas}" class="btn btn-volver">
      Volver al catálogo
    </a>
  </div>

</div>

<script th:src="@{/js/scripts.js}"></script>

</body>
</html>